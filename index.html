<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Madhava Reddy Arimanda</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Preloading certificate sites for faster access -->
    <link rel="prefetch" href="https://coursera.org/share/c1febfb9a590b3f7bec6b352854ac947">
    <link rel="prefetch" href="https://www.credential.net/ea420c61-f351-45d4-b6a4-38373730d7ef#acc.O3qfk4pe">
    <style>
        :root {
            --bg-dark: #0a0a0a;
            --text-dark: #e5e5e5;
            --glass-bg-dark: rgba(17, 17, 17, 0.7);
            --glass-border-dark: rgba(255, 255, 255, 0.1);
            --nav-bg-dark: rgba(30, 30, 30, 0.5);

            --bg-light: #f8f7ff;
            --text-light: #1d1d1f;
            --glass-bg-light: rgba(245, 245, 247, 0.7);
            --glass-border-light: rgba(0, 0, 0, 0.1);
            --nav-bg-light: rgba(249, 250, 251, 0.7);
        }

        html {
            scroll-behavior: smooth;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-dark);
            overflow-x: hidden;
            transition: background-color 0.6s ease-in-out, color 0.6s ease-in-out;
        }
        #particles-js {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
            transition: opacity 0.6s ease-in-out;
        }
        .glass-effect {
            background: var(--glass-bg-dark);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border-dark);
            transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.6s ease-in-out, border 0.6s ease-in-out;
        }
        .glass-effect:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.4);
        }
        .glow-effect {
            box-shadow: 0 0 15px rgba(99, 102, 241, 0.5), 0 0 30px rgba(99, 102, 241, 0.3);
            transition: box-shadow 0.6s ease-in-out;
        }
        
        header {
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        header.nav-hidden {
            transform: translateY(-100%);
        }
        
        #progress-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            height: 5px;
            background: rgba(99, 102, 241, 0.6);
            width: 0%;
            z-index: 100;
            transition: width 0.1s linear, background-color 0.6s ease-in-out;
        }

        /* --- Timeline --- */
        .timeline-container { position: relative; width: 100%; margin: auto; }
        .timeline-line { position: absolute; width: 2px; background-color: #374151; top: 0; bottom: 0; left: 1rem; transition: background-color 0.5s ease; }
        .timeline-line-progress { position: absolute; width: 2px; background: linear-gradient(to bottom, #a855f7, #6366f1, #10b981); top: 0; left: 1rem; height: 0; transition: height 1.2s cubic-bezier(0.4, 0, 0.2, 1), background 0.6s ease-in-out; }
        .timeline-item { position: relative; padding-left: 3rem; margin-bottom: 3rem; opacity: 0; transform: translateY(20px); transition: opacity 0.6s ease, transform 0.6s ease; z-index: 1; }
        .timeline-item.visible { opacity: 1; transform: translateY(0); }
        .timeline-icon { position: absolute; width: 3.5rem; height: 3.5rem; border-radius: 50%; display: flex; align-items: center; justify-content: center; background-color: #ffffff; border: 2px solid #4f46e5; box-shadow: 0 0 15px rgba(79, 70, 229, 0.7); z-index: 2; animation: pulse 2s infinite; overflow: hidden; left: 1rem; top: 0; transform: translateX(-50%); transition: all 0.5s ease; }
        .timeline-icon img { width: 100%; height: 100%; object-fit: contain; padding: 8px; }
        @keyframes pulse { 0% { box-shadow: 0 0 15px rgba(79, 70, 229, 0.7); } 50% { box-shadow: 0 0 25px rgba(99, 102, 241, 1); } 100% { box-shadow: 0 0 15px rgba(79, 70, 229, 0.7); } }
        
        /* --- Page Transitions --- */
        .page { display: none; animation: fadeIn 0.5s ease-in-out forwards; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* --- Navigation --- */
        .nav-container { display: inline-flex; align-items: center; background: var(--nav-bg-dark); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border: 1px solid var(--glass-border-dark); border-radius: 9999px; padding: 0.25rem; box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37); max-width: 100%; transition: background 0.6s ease-in-out, border-color 0.6s ease-in-out, box-shadow 0.6s ease-in-out; }
        #main-nav { display: flex; align-items: center; overflow-x: auto; scrollbar-width: none; }
        #main-nav::-webkit-scrollbar { display: none; }
        .nav-link { flex-shrink: 0; padding: 0.5rem 1rem; border-radius: 9999px; transition: all 0.3s ease; font-weight: 500; color: var(--text-dark); cursor: pointer; font-size: 0.9rem; }
        @media (min-width: 640px) { .nav-link { padding: 0.75rem 1.5rem; font-size: 1rem; } }
        .nav-link.active { background-color: rgba(255, 255, 255, 0.2); color: #fff; box-shadow: 0 0 10px rgba(255, 255, 255, 0.1); }
        .nav-link:not(.active):hover { background-color: rgba(255, 255, 255, 0.1); color: #fff; }

        /* --- Theme Toggle --- */
        #theme-toggle { flex-shrink: 0; margin-right: 0.25rem; margin-left: 0.25rem; width: 44px; height: 44px; border-radius: 50%; border: none; background: rgba(255,255,255,0.1); transition: background-color 0.3s ease; }
        #theme-toggle:hover { background: rgba(255,255,255,0.2); }
        #theme-toggle:focus { outline: none; }

        /* --- Financial Presentation --- */
        .presentation-container { position: relative; width: 100%; max-width: 1200px; margin: 0 auto; padding: 0 1rem 2rem 1rem; }
        .heading-left-align { text-align: left !important; }
        .presentation-page { min-height: calc(100vh - 6rem); display: flex; flex-direction: column; justify-content: center; position: relative; z-index: 2; padding: 2rem 0; }
        #pres-page-1 { min-height: auto; justify-content: flex-start; }
        .presentation-content { opacity: 0; transform: translateY(30px); transition: opacity 0.8s ease-out, transform 0.8s ease-out; }
        .presentation-page.is-visible .presentation-content { opacity: 1; transform: translateY(0); }
        .chart-placeholder { background-color: rgba(255, 255, 255, 0.05); transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.5s ease; position: relative; z-index: 3; }
        .chart-placeholder:hover { transform: scale(1.03); box-shadow: 0 0 25px rgba(139, 92, 246, 0.4); }
        .text-justify { text-align: justify; }
        .case-button { padding: 0.75rem 1.5rem; border-radius: 9999px; border: 1px solid transparent; transition: all 0.3s ease; font-weight: 500; background: linear-gradient(145deg, rgba(255,255,255,0.1), rgba(255,255,255,0)); box-shadow: 0 4px 6px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.1); }
        .case-button.active { background-color: rgba(99, 102, 241, 0.2); border-color: #6366f1; color: #fff; box-shadow: 0 2px 4px rgba(0,0,0,0.2), inset 0 1px 1px rgba(0,0,0,0.1); }
        
        .case-content { transition: opacity 0.4s ease-in-out, transform 0.4s ease-in-out; }
        .case-content:not(.active) { opacity: 0; transform: translateY(10px); display: none; }
        .case-content.active { display: block; animation: fadeInCase 0.5s ease-in-out forwards; }
        @keyframes fadeInCase { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        ul.list-disc { padding-left: 1.25rem; }
        .timeline-item ul.list-disc li strong { color: var(--text-dark); }
        body.light-mode .timeline-item ul.list-disc li strong { color: #1f2937 !important; }
        .case-chart { transition: opacity 0.4s ease-in-out; }
        .case-chart.hidden { display: none; opacity: 0; }

        /* --- Modals, Toasts, & Buttons --- */
        #success-toast { position: fixed; bottom: 2rem; left: 50%; transform: translateX(-50%); background-color: #22c55e; color: white; padding: 1rem 1.5rem; border-radius: 0.5rem; box-shadow: 0 4px 15px rgba(0,0,0,0.2); z-index: 100; opacity: 0; visibility: hidden; transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease; }
        #success-toast.show { opacity: 1; visibility: visible; transform: translate(-50%, -10px); }
        #mobile-alert-container, #contact-modal, #certificate-modal { transition: opacity 0.3s ease; }
        .modal-container.visible { opacity: 1; pointer-events: auto; }
        .modal-content { transition: transform 0.3s ease, opacity 0.3s ease; transform: scale(0.95); opacity: 0;}
        .modal-container.visible .modal-content { transform: scale(1); opacity: 1; }
        
        /* Floating Button */
        #floating-contact-btn { transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.4s ease; perspective: 1000px; }
        #floating-contact-btn.btn-hidden { transform: scale(0.8) translateY(20px); opacity: 0; pointer-events: none; }
        #floating-btn-flipper { transition: transform 0.6s; transform-style: preserve-3d; }
        #floating-contact-btn.is-contact #floating-btn-flipper { transform: rotateY(180deg); }
        .floating-btn-face { backface-visibility: hidden; -webkit-backface-visibility: hidden; }
        .floating-btn-face.is-back { transform: rotateY(180deg); }
        
        /* Mobile Alert */
        .device-animation { font-size: 3rem; margin-bottom: 1.5rem; display: flex; align-items: center; justify-content: center; gap: 1rem; }
        #mobile-alert .device-animation > i, #mobile-alert > p { opacity: 0; }
        @keyframes mobile-in { from { transform: translateX(-30px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        @keyframes arrow-in { from { transform: scaleX(0); opacity: 0; } to { transform: scaleX(1); opacity: 1; } }
        @keyframes laptop-in { from { transform: translateX(30px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        @keyframes text-in { from { opacity: 0; } to { opacity: 1; } }

        .close-btn { position: absolute; top: 0.75rem; right: 0.75rem; width: 2.5rem; height: 2.5rem; background-color: rgba(255,255,255,0.1); color: var(--text-dark); border-radius: 9999px; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: background-color 0.2s, color 0.5s ease, transform 0.2s ease; font-size: 1.5rem; line-height: 1; z-index: 10; }
        .close-btn:hover { background-color: rgba(255,255,255,0.2); transform: scale(1.1); }

        /* --- Light Mode --- */
        body.light-mode { background-color: var(--bg-light); color: var(--text-light); }
        .light-mode #progress-bar { background: rgba(249, 115, 22, 0.6); }
        .light-mode .glass-effect {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(0, 0, 0, 0.08);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        }
        .light-mode .glass-effect:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1), 0 0 15px rgba(249, 115, 22, 0.2);
        }
        .light-mode .nav-container {
            background: rgba(255, 255, 255, 0.65);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(0,0,0,0.08);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .light-mode .nav-link { color: #374151; }
        .light-mode .nav-link.active { background-color: rgba(0, 0, 0, 0.1); color: #111827; }
        .light-mode .nav-link:not(.active):hover { background-color: rgba(0, 0, 0, 0.05); color: #111827; }
        .light-mode h1, .light-mode h2, .light-mode h3, .light-mode h4, .light-mode h5, .light-mode .text-white { color: #111827 !important; }
        .light-mode .text-gray-300, .light-mode .text-gray-400, .light-mode footer, .light-mode .text-gray-500, .light-mode p, .light-mode li { color: #4b5563 !important; }
        .light-mode .border-indigo-500 { border-color: #f59e0b; }
        .light-mode .text-indigo-400 { color: #f97316 !important; }
        .light-mode .glow-effect { box-shadow: 0 0 10px rgba(245, 158, 11, 0.3), 0 0 20px rgba(249, 115, 22, 0.15); }
        .light-mode .timeline-line { background-color: #d1d5db; }
        .light-mode .timeline-line-progress { background: linear-gradient(to bottom, #f97316, #fb923c, #facc15); }
        .light-mode .timeline-icon { border-color: #f97316; animation: none; box-shadow: 0 0 15px rgba(249, 115, 22, 0.5); }
        .light-mode .bg-indigo-600, .light-mode .view-cert-btn { background-color: #f59e0b; }
        .light-mode .hover\:bg-indigo-700:hover, .light-mode .view-cert-btn:hover { background-color: #d97706; }
        .light-mode .case-button { background: linear-gradient(145deg, #fefefe, #e6e6e6); color: #333; box-shadow: 0 4px 6px rgba(0,0,0,0.1), inset 0 1px 0 #fff; }
        .light-mode .case-button.active { background: linear-gradient(145deg, #f97316, #f59e0b); border-color: #f97316; color: #fff; box-shadow: 0 2px 4px rgba(0,0,0,0.2), inset 0 1px 1px rgba(0,0,0,0.1); }
        .light-mode input, .light-mode textarea { background-color: rgba(255,255,255,0.8); border-color: #d1d5db; color: #1f2937; }
        .light-mode .close-btn { background-color: rgba(0,0,0,0.1); color: #1f2937; }
        .light-mode .close-btn:hover { background-color: rgba(0,0,0,0.2); }
        .light-mode .form-container { background: linear-gradient(145deg, #FFFFFF, #E6E6E6); }
        .light-mode .form-container h3, .light-mode .form-container p { color: #1d1d1f !important; }
        .light-mode .form-container .bg-gray-700 { background-color: #e5e7eb; color: #374151 !important; }
        .light-mode .form-container .hover\:bg-gray-600:hover { background-color: #d1d5db; }
        .light-mode .linkedin-btn { background-color: #6b7280 !important; }
        .light-mode .linkedin-btn { color: #ffffff !important; }
        .light-mode .linkedin-btn:hover { background-color: #4b5563 !important; }
        .light-mode .download-analysis-btn { background-color: #f59e0b !important; color: white !important; }
        .light-mode .download-analysis-btn:hover { background-color: #d97706 !important; }
        .light-mode .chart-placeholder:hover { box-shadow: 0 0 25px rgba(249, 115, 22, 0.4); }
    </style>
</head>
<body class="antialiased" oncontextmenu="return false;">
    <div id="progress-bar"></div>
    <div id="particles-js"></div>
    <div id="success-toast">
        <i class="fas fa-check-circle mr-2"></i> Message sent successfully! I'll get back to you soon.
    </div>

    <!-- Modals -->
    <div id="mobile-alert-container" class="modal-container fixed inset-0 z-[100] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 opacity-0 pointer-events-none">
        <div id="mobile-alert" class="modal-content glass-effect p-8 rounded-xl text-center max-w-sm w-full">
            <div class="device-animation text-indigo-400">
                <i class="fas fa-mobile-alt"></i>
                <i class="fas fa-long-arrow-alt-right"></i>
                <i class="fas fa-laptop"></i>
            </div>
            <p class="text-gray-300">For the best experience, please view this page on a larger screen.</p>
        </div>
    </div>
    <div id="contact-modal" class="modal-container fixed inset-0 z-[60] bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 opacity-0 pointer-events-none">
        <div id="contact-modal-content" class="modal-content w-full max-w-xl mx-auto"></div>
    </div>
    <!-- Certificate popup modal -->
    <div id="certificate-modal" class="modal-container fixed inset-0 z-[70] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 opacity-0 pointer-events-none">
        <div class="modal-content relative w-full h-full max-w-5xl max-h-[85vh] bg-gray-900 rounded-lg shadow-2xl">
            <button id="close-cert-modal" class="close-btn">&times;</button>
            <iframe id="certificate-iframe" src="" class="w-full h-full border-0 rounded-lg" title="Certificate Viewer"></iframe>
        </div>
    </div>

    <header class="fixed top-0 left-0 right-0 z-50 py-4">
        <div class="container mx-auto flex justify-center items-center px-4">
            <div class="nav-container">
                <nav id="main-nav"></nav>
                <button id="theme-toggle" class="p-2 rounded-full focus:outline-none flex items-center justify-center">
                    <svg id="theme-toggle-dark-icon" class="h-6 w-6 text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>
                    <svg id="theme-toggle-light-icon" class="h-6 w-6 text-yellow-500 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
                </button>
            </div>
        </div>
    </header>

    <main class="pt-24 relative z-10"></main>
    
    <button id="floating-contact-btn" class="fixed bottom-6 right-6 z-50 w-14 h-14">
        <div id="floating-btn-flipper" class="relative w-full h-full">
            <div class="floating-btn-face absolute w-full h-full rounded-full flex items-center justify-center shadow-lg glass-effect text-gray-300">
                <i class="fas fa-arrow-down text-2xl"></i>
            </div>
            <div class="floating-btn-face is-back absolute w-full h-full rounded-full flex items-center justify-center shadow-lg glass-effect text-gray-300">
                <i class="fas fa-envelope text-2xl"></i>
            </div>
        </div>
    </button>

    <footer class="py-6 text-center text-gray-500 relative z-10">
        <p>&copy; 2025 Madhava Reddy Arimanda. All Rights Reserved.</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const body = document.body;
            
            // --- PARTICLES.JS BACKGROUND ---
            const particlesDarkConfig = { particles: { number: { value: 60, density: { enable: true, value_area: 800 } }, color: { value: "#6366f1" }, shape: { type: "circle" }, opacity: { value: 0.5, random: false }, size: { value: 3, random: true }, line_linked: { enable: true, distance: 150, color: "#6366f1", opacity: 0.4, width: 1 }, move: { enable: true, speed: 2, direction: "none", out_mode: "out" } }, interactivity: { detect_on: "canvas", events: { onhover: { enable: true, mode: "repulse" }, onclick: { enable: true, mode: "push" }, resize: true }, modes: { repulse: { distance: 100 }, push: { particles_nb: 4 } } }, retina_detect: true };
            
            const particlesLightConfig = { particles: { number: { value: 40, density: { enable: true, value_area: 800 } }, color: { value: "#ff9a00" }, shape: { type: "circle" }, opacity: { value: 0.6, random: true, anim: { enable: true, speed: 1, opacity_min: 0.1, sync: false } }, size: { value: 10, random: true, anim: { enable: true, speed: 3, size_min: 5, sync: false } }, line_linked: { enable: false }, move: { enable: true, speed: 1, direction: "none", random: true, straight: false, out_mode: "out", bounce: false, attract: { enable: false } } }, interactivity: { detect_on: "canvas", events: { onhover: { enable: true, mode: "bubble" }, onclick: { enable: true, mode: "push" }, resize: true }, modes: { bubble: { distance: 200, size: 15, duration: 2, opacity: 0.8 }, push: { particles_nb: 2 } } }, retina_detect: true };

            const initParticles = (isLight) => {
                if(window.pJSDom && window.pJSDom.length > 0) {
                    window.pJSDom[0].pJS.fn.vendors.destroypJS();
                    window.pJSDom = [];
                }
                const config = isLight ? particlesLightConfig : particlesDarkConfig;
                particlesJS("particles-js", config);
            }

            // --- THEME TOGGLE LOGIC ---
            const themeToggleBtn = document.getElementById('theme-toggle');
            const darkIcon = document.getElementById('theme-toggle-dark-icon');
            const lightIcon = document.getElementById('theme-toggle-light-icon');
            
            const prefersLight = localStorage.getItem('theme') === 'light';

            if (prefersLight) {
                body.classList.add('light-mode');
                darkIcon.classList.add('hidden');
                lightIcon.classList.remove('hidden');
            }
            initParticles(prefersLight);

            themeToggleBtn.addEventListener('click', () => {
                body.classList.toggle('light-mode');
                darkIcon.classList.toggle('hidden');
                lightIcon.classList.toggle('hidden');
                const isLight = body.classList.contains('light-mode');
                localStorage.setItem('theme', isLight ? 'light' : 'dark');
                initParticles(isLight);
            });

            // --- SCROLL LOGIC & FLOATING BUTTON ---
            let lastScrollTop = 0;
            const progressBar = document.getElementById('progress-bar');
            const floatingBtn = document.getElementById('floating-contact-btn');
            let isContactState = false;
            
            const showPage = (pageId) => {
                document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
                const newPage = document.getElementById(`page-${pageId}`);
                if (newPage) newPage.classList.add('active');
                
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.toggle('active', link.dataset.pageId === pageId);
                    if (link.dataset.pageId === pageId) link.scrollIntoView({ behavior: 'smooth', inline: 'center', block: 'nearest' });
                });

                if (pageId === 'projects' && window.innerWidth < 768) {
                    const mobileAlertContainer = document.getElementById('mobile-alert-container');
                    mobileAlertContainer.classList.add('visible');
                    setTimeout(() => mobileAlertContainer.classList.remove('visible'), 5000);
                }
                
                window.scrollTo({top: 0, behavior: 'smooth'});
                setTimeout(updateFloatingButton, 100);
            };
            
            const updateFloatingButton = () => {
                const scrollTop = document.documentElement.scrollTop;
                const scrollHeight = document.documentElement.scrollHeight;
                const clientHeight = document.documentElement.clientHeight;
                
                const isPageTooSmall = scrollHeight <= clientHeight + 5;
                const shouldBeContact = scrollTop > clientHeight * 0.3;

                const newContactState = isPageTooSmall || shouldBeContact;

                if (newContactState !== isContactState) {
                    isContactState = newContactState;
                    floatingBtn.classList.toggle('is-contact', isContactState);
                }
            };

            window.addEventListener('scroll', function() {
                const scrollTop = document.documentElement.scrollTop;
                const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                const scrollPercent = (scrollTop / scrollHeight) * 100;
                progressBar.style.width = scrollPercent + '%';

                const isScrollingDown = scrollTop > lastScrollTop && scrollTop > document.querySelector('header').offsetHeight;
                if (Math.abs(lastScrollTop - scrollTop) > 50) {
                    document.querySelector('header').classList.toggle('nav-hidden', isScrollingDown);
                    lastScrollTop = scrollTop <= 0 ? 0 : scrollTop; 
                }
                
                updateFloatingButton();
            }, false);

            // --- DATA ---
            const portfolioData = {
                pages: [ { id: 'home', label: 'Home' }, { id: 'experience', label: 'Experience' }, { id: 'projects', label: 'Projects' }, { id: 'certifications', label: 'Certifications' }, { id: 'resume', label: 'Resume' } ],
                home: { name: "Madhava Reddy Arimanda", title: "Business management professional skilled in financial analysis, credit-risk assessment, and process governance.", imageUrl: "Profile.jpg",},
                about: { title: "About Me", description: "I am a dedicated and analytical professional with a strong foundation in finance and business management. My experience at leading firms like Deloitte and Oxane Partners has equipped me with valuable skills in risk assessment, financial modeling, and data analysis. I am passionate about leveraging my expertise to drive strategic decisions and contribute to a dynamic organization. I am eager to deepen my financial-analytics expertise and transition to a strategic leadership track."},
                snapshots: [ { title: "Career Snapshot", position: "Risk and Brand Protection Analyst", company: "Deloitte, Hyderabad (Jun 2024 - Present)", description: "Developed a dynamic rate-card model, operationalized SEC/AICPA rules for 100% compliance, and reengineered workflows to cut request times by ~30%.", link: "experience", linkText: "View Detailed Experience" }, { title: "Project Highlights", position: "Starbucks (SBUX) Financial Forecast & Valuation", company: "Key Skills: Scenario Analysis, DCF Valuation, Financial Modeling", description: "Conducted an FMVA®-level analysis of Starbucks, developing Base, Bull, and Bear case forecasts to assess its financial trajectory and intrinsic value.", link: "projects", linkText: "View All Projects" }, { title: "Certifications Snapshot", position: "Masters of Business Administration", company: "GITAM School of Business", description: "Specialized in Finance & Marketing and certified in Microsoft 35 and Financial Modeling (FMVA).", link: "certifications", linkText: "View All Certifications" } ],
                experiences: [
                    {
                        date: 'Jun 2024 - Present',
                        title: 'Risk and Brand Protection Analyst',
                        company: 'Deloitte, Hyderabad',
                        duties: [
                            '<strong>Strategic finance & valuation readiness</strong> — Developed a dynamic rate-card model from detailed cost analysis that supported a targeted 15% regional expansion while preserving project profitability. Managed normalization of public and private financials and ownership data to deliver DCF-ready inputs for M&A and conflict-of-interest reviews.',
                            '<strong>Regulatory independence & risk modelling</strong> — Operationalized SEC, AICPA, and PCAOB rules into firm workflows; applied ownership classifications (Controlled / Significant Influence) and built scorecards to quantify independence and reputational risk, maintaining 100% auditor-independence compliance across reviewed engagements.',
                            '<strong>Process redesign, automation & ISQM alignment</strong> — Reengineered workflow allocation and automated routing to meet ISQM standards. Integrated Excel/VBA automations and an Access → Power BI pipeline to enable self-service dashboards, cutting request action time by ~30%, materially reducing escalation exceptions and slashing the aging-report runtime by ~80%.',
                            '<strong>Prompt engineering & operational acceleration</strong> — Implemented prompt-based automation and low-code (“vibe”) scripts to eliminate repetitive manual steps, reducing research and solutioning time by an estimated ~40% on priority projects.',
                            '<strong>Stakeholder leadership & recognition</strong> — Led US stakeholder workshops to translate business needs into technical roadmaps, supported peak-season surge operations, and received two firm-wide awards within 14 months for increasing throughput and sustaining compliance.'
                        ],
                        logoUrl: 'Deloitte.png'
                    },
                    { date: 'Jun 2023 - Jul 2023', title: 'Portfolio Management Intern', company: 'Oxane Partners, Hyderabad', duties: ['Managed financial risks associated with candidate onboarding.', 'Analyzed internal and external databases for potential matches.'], logoUrl: 'Oxane Partners.png' },
                    { date: 'Jan 2022 - Aug 2022', title: 'Talent Acquisition Specialist', company: 'SSi People, Bangalore', duties: ['Conducted analysis of financial statements to identify trends.', 'Developed complex financial models using Microsoft Excel.', 'Analyzed loan agreements for effective portfolio management.'], logoUrl: 'SSI People.png' }
                ],
                skills: ['Financial Modelling', 'Project Management', 'Excel', 'Tableau', 'SPSS', 'Canva', 'PowerPoint', 'Outlook'],
                educations: [ { degree: 'Masters of Business Administration', school: 'GITAM School of Business, Visakhapatnam', date: 'Aug 2022 - May 2024', details: 'CGPA: 8.46 (1st Year)', logoPlaceholder: 'GITAM' }, { degree: 'Bachelor of Business Administration', school: 'Dayananda Sagar Institutions, Bangalore', date: 'May 2018 - Aug 2021', details: 'CGPA: 9.0 (A+ Grade)', logoPlaceholder: 'DSI' } ],
                certifications: [
                    { name: 'Microsoft 365 Fundamentals', issuer: 'Microsoft in Coursera', date: 'Issued: June 2024', logoUrl: 'https://i.imgur.com/su1c14I.png', url: 'https://coursera.org/share/c1febfb9a590b3f7bec6b352854ac947', type: 'direct' },
                    { name: 'Financial Modeling & Valuation Analyst (FMVA)', issuer: 'Corporate Finance Institute (CFI)', date: 'Issued: April 2024', logoUrl: 'https://i.imgur.com/s6f4a2z.png', url: 'https://www.credential.net/ea420c61-f351-45d4-b6a4-38373730d7ef#acc.O3qfk4pe', type: 'modal' },
                    { name: 'Placeholder Certificate', issuer: 'Awarding Institution', date: 'Issued: Month Year', logoUrl: 'https://i.imgur.com/c1Xf1aU.png', url: 'https://placehold.co/1200x900/0a0a0a/e5e5e5?text=Certificate', type: 'modal' } 
                ],
                resume: { imageUrl: "Resume.jpg", pdfUrl: "Madhava Reddy Arimanda.pdf" }
            };

            const mainContainer = document.querySelector('main');
            
            portfolioData.pages.forEach(page => {
                const link = document.createElement('a');
                link.className = 'nav-link';
                link.textContent = page.label;
                link.dataset.pageId = page.id;
                link.onclick = () => showPage(page.id);
                document.getElementById('main-nav').appendChild(link);
            });
            
            // --- PAGE CREATION ---
            const createHomePage = () => {
                const page = document.createElement('div'); page.id = 'page-home'; page.className = 'page';
                const snapshotsHTML = portfolioData.snapshots.map(s => `<section class="py-12"><div class="container mx-auto px-6"><h3 class="text-3xl md:text-4xl font-bold text-center mb-12 text-white">${s.title}</h3><div class="max-w-4xl mx-auto p-8 rounded-lg glass-effect"><div class="border-l-2 border-indigo-500 pl-6"><h4 class="text-xl font-bold text-white">${s.position}</h4><p class="text-lg text-indigo-400 mb-2">${s.company}</p><p class="text-gray-400">${s.description}</p></div><div class="text-center mt-8"><a href="javascript:void(0);" data-link="${s.link}" class="snapshot-link text-indigo-400 hover:text-indigo-300 font-semibold transition-colors duration-300 cursor-pointer">${s.linkText} &rarr;</a></div></div></div></section>`).join('');
                const contactSectionHTML = `<section class="py-16"><div class="container mx-auto px-6"><div class="max-w-2xl mx-auto"><div id="home-contact-form-container"></div></div></div></section>`;
                page.innerHTML = `<section class="container mx-auto px-6 py-16"><div class="flex flex-col md:flex-row items-center justify-center gap-8 md:gap-12 text-center md:text-left"><div class="relative w-48 h-48 md:w-56 md:h-56 flex-shrink-0"><img src="${portfolioData.home.imageUrl}" alt="${portfolioData.home.name}" class="rounded-full w-full h-full object-cover border-4 border-indigo-500 glow-effect bg-gray-900" style="pointer-events: none;"></div><div><h2 class="text-4xl md:text-6xl font-bold mb-4 tracking-tight text-white">${portfolioData.home.name}</h2><p class="text-lg md:text-xl text-gray-400 max-w-3xl">${portfolioData.home.title}</p></div></div></section><section id="about-section" class="py-12"><div class="container mx-auto px-6"><h3 class="text-3xl md:text-4xl font-bold text-center mb-12 text-white">About Me</h3><div class="max-w-4xl mx-auto text-base md:text-lg text-gray-300 leading-relaxed text-justify p-8 rounded-lg glass-effect">${portfolioData.about.description}</div></div></section>${snapshotsHTML}${contactSectionHTML}`;
                mainContainer.appendChild(page);
            };
            const createExperiencePage = () => { 
                const page = document.createElement('div'); page.id = 'page-experience'; page.className = 'page';
                const experiencesHTML = portfolioData.experiences.map(exp => `<div class="timeline-item"><div class="timeline-icon"><img src="${exp.logoUrl}" alt="${exp.company} logo"></div><div class="p-6 rounded-lg glass-effect"><h4 class="text-xl font-bold mb-1 text-white">${exp.title}</h4><p class="text-lg font-semibold text-gray-300 mb-2">${exp.company}</p><p class="text-sm text-indigo-400 mb-3">${exp.date}</p><ul class="list-disc list-inside text-gray-400 space-y-2">${exp.duties.map(duty => `<li>${duty}</li>`).join('')}</ul></div></div>`).join('');
                const skillsHTML = portfolioData.skills.map(skill => `<div class="p-6 rounded-lg glass-effect flex items-center justify-center"><p class="text-lg font-semibold text-white">${skill}</p></div>`).join('');
                page.innerHTML = `<section class="py-16"><div class="container mx-auto px-6"><h3 class="text-3xl md:text-4xl font-bold text-center mb-12 md:mb-20 text-white">Work Experience</h3><div class="relative timeline-container" id="experience-container"><div class="timeline-line"></div><div class="timeline-line-progress" id="timeline-progress"></div>${experiencesHTML}<div id="timeline-end" class="h-1"></div></div></div></section><section class="py-16"><div class="container mx-auto px-6"><h3 class="text-3xl md:text-4xl font-bold text-center mb-12 text-white">Technical Skills</h3><div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-4 gap-4 md:gap-8 text-center">${skillsHTML}</div></div></section>`; 
                mainContainer.appendChild(page); 
            };
            const createCertificationsPage = () => {
                const page = document.createElement('div'); page.id = 'page-certifications'; page.className = 'page';
                const certificationsHTML = portfolioData.certifications.map(cert => `
                    <div class="p-6 rounded-lg glass-effect flex flex-col sm:flex-row items-center gap-6 text-center sm:text-left">
                        <div class="flex-shrink-0 w-16 h-16 rounded-full bg-white/10 flex items-center justify-center border-2 border-indigo-500/30 p-2">
                             <img src="${cert.logoUrl}" alt="${cert.name} Logo" class="object-contain">
                        </div>
                        <div class="flex-grow">
                            <h4 class="text-xl font-bold text-white">${cert.name}</h4>
                            <p class="text-lg text-indigo-400 mb-2">${cert.issuer}</p>
                            <p class="text-gray-400 text-sm">${cert.date}</p>
                        </div>
                        <div class="sm:ml-auto mt-4 sm:mt-0">
                            <button class="view-cert-btn bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-6 rounded-full transition-all duration-300 glow-effect" data-url="${cert.url}" data-type="${cert.type || 'modal'}">
                                View
                            </button>
                        </div>
                    </div>
                `).join('');
                const educationsHTML = portfolioData.educations.map(edu => `
                    <div class="p-6 rounded-lg glass-effect flex flex-col sm:flex-row items-center gap-6 text-center sm:text-left">
                        <div class="flex-shrink-0 w-20 h-20 rounded-full bg-white/10 flex items-center justify-center border-2 border-indigo-500/30">
                            <span class="text-2xl font-bold text-white">${edu.logoPlaceholder}</span>
                        </div>
                        <div class="flex-grow">
                            <h4 class="text-xl font-bold text-white">${edu.degree}</h4>
                            <p class="text-lg text-indigo-400 mb-2">${edu.school}</p>
                            <p class="text-gray-400 text-sm">${edu.date}</p>
                        </div>
                        <div class="sm:ml-auto mt-4 sm:mt-0 text-center">
                            <div class="bg-indigo-500/10 text-indigo-300 rounded-lg px-4 py-2 ring-1 ring-inset ring-indigo-500/20">
                                <p class="text-xs font-semibold uppercase tracking-wider">CGPA</p>
                                <p class="text-2xl font-bold">${edu.details.replace('CGPA: ', '').replace(' (A+ Grade)', '+').replace(' (1st Year)','')}</p>
                            </div>
                        </div>
                    </div>
                `).join('');
                page.innerHTML = `<section class="py-16"><div class="container mx-auto px-6"><h3 class="text-3xl md:text-4xl font-bold text-center mb-12 text-white">Certifications</h3><div class="grid grid-cols-1 lg:grid-cols-2 gap-8 max-w-6xl mx-auto">${certificationsHTML}</div></div></section><section class="py-16"><div class="container mx-auto px-6"><h3 class="text-3xl md:text-4xl font-bold text-center mb-12 text-white">Education</h3><div class="grid grid-cols-1 lg:grid-cols-2 gap-8 max-w-6xl mx-auto">${educationsHTML}</div></div></section>`;
                mainContainer.appendChild(page);
            };
            const createProjectsPage = () => {
                const page = document.createElement('div'); page.id = 'page-projects'; page.className = 'page';
                page.innerHTML = `
                    <section class="pt-16">
                        <div class="presentation-container relative">
                        <div class="presentation-page" id="pres-page-1"><div class="max-w-4xl mx-auto presentation-content text-center"><div class="flex flex-col items-center gap-8"><div class="flex flex-col md:flex-row justify-center items-center gap-6 md:text-left"><img id="pres-logo" src="Starbucks.jpg" alt="Starbucks Company Logo" class="stagger-1 h-32 w-32 flex-shrink-0 rounded-full bg-white p-1 object-contain"><div><h4 class="text-2xl md:text-3xl font-bold text-white stagger-2">Starbucks Corporation (SBUX)</h4><p class="text-indigo-400 mt-2 text-md md:text-lg stagger-2">FMVA®-level scenario analysis and forecasting, assessing Starbucks’ growth drivers, margins, EPS trajectory, and valuation under Base, Bull, and Bear cases.</p></div></div><div class="stagger-3"><p class="text-gray-300 text-base md:text-lg leading-relaxed text-justify">This project delivers a structured financial analysis of Starbucks Corporation (SBUX), the world’s largest coffeehouse chain with over 40,000 stores globally. Drawing on my FMVA® certification skills, I assessed Starbucks’ historical performance and developed forward-looking forecasts through FY28. The analysis highlights the dynamics between store expansion and same-store sales growth, the evolution of operating and net margins, and the trajectory of earnings per share (EPS).</p><p class="text-gray-300 mt-4 text-base md:text-lg leading-relaxed text-justify">To capture strategic uncertainty, I built Base, Bull, and Bear scenarios, quantifying how shifts in consumer demand, margin efficiency, and capital allocation could shape Starbucks’ financial outcomes and implied share valuation. Beyond the numbers, this project demonstrates my ability to translate financials into actionable insights, reflecting a consulting approach that connects operational levers with shareholder value creation.</p></div></div></div></div>
                        <div class="presentation-page" id="pres-page-2"><div class="mb-8"><h4 id="project-heading-1" class="text-xl font-bold text-white heading-left-align">Past performance & operational levers: what moved Starbucks’ numbers (1/2)</h4></div><div class="grid md:grid-cols-2 gap-12 items-center"><div class="presentation-content"><img src="Graph-1.jpg" alt="Revenue Chart" class="rounded-lg chart-placeholder w-full h-auto"></div><div class="presentation-content text-center md:text-left"><h5 class="text-2xl font-bold text-white">Revenue vs. profitability — margin-driven earnings volatility</h5><div class="text-gray-400 mt-4 leading-relaxed text-justify"><p>Revenue recovered after the pandemic but flattened in FY24 (~$36B). Margin swings over the period meant that even modest revenue changes drove meaningful differences in earnings; the net-margin profile shows limited room for downside before profitability is impacted. In short, scale growth alone didn’t create a durable cushion — margin behavior remained the primary driver of short-term earnings variability.</p><ul class="list-disc mt-4 space-y-2"><li>The chart indicates earnings moved largely because margins changed more than revenue did.</li><li>The pattern points that cost structure, sales mix, and pricing are the key factors behind this margin variability.</li></ul></div></div></div></div>
                        <div class="presentation-page" id="pres-page-3"><div class="mb-8"><h4 id="project-heading-2" class="text-xl font-bold text-white heading-left-align">Past performance & operational levers: what moved Starbucks’ numbers (2/2)</h4></div><div class="grid md:grid-cols-2 gap-12 items-center"><div class="presentation-content"><img src="Graph-2.jpg" alt="Comps Chart" class="rounded-lg chart-placeholder w-full h-auto"></div><div class="presentation-content text-center md:text-left"><h5 class="text-2xl font-bold text-white">Network expansion vs. comps — growth without guaranteed productivity</h5><div class="text-gray-400 mt-4 leading-relaxed text-justify"><p>Starbucks expanded its store base materially from FY21–FY24, while same-store sales (comps) slowed sharply and turned negative in FY24. This divergence — unit growth alongside weakening like-for-like demand — reduced per-store productivity and explained why scale did not translate directly into margin improvement. The chart underscores the need to distinguish between network expansion and true underlying demand.</p><ul class="list-disc mt-4 space-y-2"><li>Comps measure sales growth at existing stores (open >12 months), isolating like-for-like performance from new openings.</li><li>The pattern highlights pressure on per-store returns, showing that headline revenue growth can mask weaker store-level economics.</li></ul></div></div></div></div>
                        <div class="presentation-page flex-col !justify-center" style="min-height: 20vh;"><p class="text-gray-400 text-center max-w-3xl mx-auto presentation-content">While historical results highlighted margin sensitivity and comps pressure, the forward cases show how these levers shape Starbucks’ valuation path.</p></div>
                        <div class="presentation-page" id="pres-page-4">
                            <div class="mb-8"><h4 id="project-heading-3" class="text-xl font-bold text-white heading-left-align">Future trajectory & valuation levers: how Starbucks could perform</h4></div>
                            <div class="grid md:grid-cols-2 gap-12 items-center">
                                <div class="presentation-content relative flex items-center justify-center">
                                    <img id="base-case-chart" src="Graph-3.jpg" alt="Base Case Forecast Chart" class="case-chart rounded-lg chart-placeholder w-full h-auto">
                                    <img id="bull-case-chart" src="Graph-4.jpg" alt="Bull Case Forecast Chart" class="case-chart hidden rounded-lg chart-placeholder w-full h-auto">
                                    <img id="bear-case-chart" src="Graph-5.jpg" alt="Bear Case Forecast Chart" class="case-chart hidden rounded-lg chart-placeholder w-full h-auto">
                                </div>
                                <div class="presentation-content">
                                    <div class="flex justify-center md:justify-start gap-4 mb-6" id="case-buttons-container">
                                        <button class="case-button active" data-case="base">Base Case</button>
                                        <button class="case-button" data-case="bull">Bull Case</button>
                                        <button class="case-button" data-case="bear">Bear Case</button>
                                    </div>
                                    <div id="case-selector-container" class="relative">
                                        <div id="base-case-content" class="case-content active"><h5 class="text-xl font-bold text-white mb-2">Base Case — Balanced recovery: measured growth, conservative margins</h5><div class="text-gray-400 mt-4 leading-relaxed text-justify"><p>Revenue expands steadily, supported by continued store growth, but comparable sales remain muted and margins show little improvement. Earnings grow moderately, yet the implied valuation falls short of Starbucks’ current trading levels. This reflects a deliberately cautious stance after FY24’s slowdown — suggesting that investors are already pricing in stronger profitability, faster comps recovery, or additional optionality beyond this base scenario.</p><ul class="list-disc mt-4 space-y-2 pl-5"><li>Growth is driven mainly by new stores rather than comps, leaving per-store productivity flat.</li><li>Margins hold steady, so the valuation sits below market levels, underscoring the gap between cautious forecasts and investor optimism.</li></ul></div></div>
                                        <div id="bull-case-content" class="case-content"><h5 class="text-xl font-bold text-white mb-2">Bull Case — Upside execution: stronger comps and margin recovery</h5><div class="text-gray-400 mt-4 leading-relaxed text-justify"><p>Comparable sales rebound and margins expand, unlocking earnings leverage beyond topline growth. Store additions compound these gains, delivering stronger revenue and profit momentum. The implied valuation aligns more closely with, or even surpasses, today’s market price — reinforcing that investor sentiment already reflects this more optimistic trajectory.</p><ul class="list-disc mt-4 space-y-2 pl-5"><li>Comp recovery boosts per-store productivity, amplifying scale benefits.</li><li>Margin expansion drives higher earnings, bringing the valuation in line with or above market pricing.</li></ul></div></div>
                                        <div id="bear-case-content" class="case-content"><h5 class="text-xl font-bold text-white mb-2">Bear Case — Downside pressure: weak comps and margin headwinds</h5><div class="text-gray-400 mt-4 leading-relaxed text-justify"><p>Comparable sales decline further while cost inflation and operating pressures squeeze margins. Store growth continues but does not translate into higher efficiency, leaving earnings capped despite a larger footprint. The resulting valuation lands well below market pricing, highlighting downside risks if Starbucks fails to reignite demand or contain costs.</p><ul class="list-disc mt-4 space-y-2 pl-5"><li>Falling comps erode like-for-like performance and per-store returns.</li><li>Rising costs keep margins tight, leaving the valuation materially under current market levels.</li></ul></div></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="presentation-page" id="pres-page-5">
                            <div class="mb-8"><h4 id="project-heading-4" class="text-xl font-bold text-white heading-left-align">Starbucks at a Crossroads: What Matters Going Forward</h4></div>
                            <div class="grid md:grid-cols-2 gap-12 items-center presentation-content">
                                <div class="text-center"><img src="Graph-6.png" alt="Strategic Outlook Telescope" class="rounded-lg chart-placeholder w-full h-auto mx-auto opacity-75"></div>
                                <div class="text-center md:text-left"><p class="text-gray-400 text-base md:text-lg leading-relaxed text-justify">Starbucks’ trajectory now hinges less on sheer store expansion and more on its ability to revive comparable sales and protect margins. The slowdown in FY24 revealed vulnerabilities in per-store productivity, while ongoing margin swings reinforced earnings sensitivity. With a new CEO at the helm, leadership’s ability to reset strategy and drive operational discipline will be tested. Whether Starbucks delivers durable growth depends on balancing scale with stronger unit economics, making the next few years decisive for shareholder value.</p></div>
                            </div>
                        </div>
                        <div class="text-center py-12"><a href="SBUX Financial Model - Madhava Reddy Arimanda.xlsx" download class="download-analysis-btn bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg transition-all duration-300 inline-flex items-center gap-3"><i class="fas fa-file-excel"></i> Download Full Analysis</a></div>
                    </div>
                    </section>
                `;
                mainContainer.appendChild(page);
            };
            const createResumePage = () => { 
                const page = document.createElement('div'); page.id = 'page-resume'; page.className = 'page';
                const today = new Date();
                const dayOfWeek = today.getDay();
                const lastSunday = new Date(new Date().setDate(today.getDate() - dayOfWeek));
                const formattedDate = lastSunday.toLocaleString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
                page.innerHTML = `<section class="py-16"><div class="container mx-auto px-6"><h3 class="text-3xl md:text-4xl font-bold text-center mb-12 text-white">Resume</h3><div class="max-w-4xl mx-auto"><div class="p-2 md:p-4 rounded-lg glass-effect"><img src="${portfolioData.resume.imageUrl}" alt="Resume" class="rounded-md w-full h-full object-contain"></div><p class="text-right text-sm text-gray-400 italic mt-2">Last updated on ${formattedDate}</p></div><div class="text-center mt-8"><a href="${portfolioData.resume.pdfUrl}" download class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-all duration-300 inline-block glow-effect">Download PDF Version</a></div></div></section>`; 
                mainContainer.appendChild(page); 
            };

            createHomePage(); createExperiencePage(); createProjectsPage(); createCertificationsPage(); createResumePage();
            
            document.querySelectorAll('.snapshot-link').forEach(link => {
                link.addEventListener('click', (event) => {
                    event.preventDefault();
                    const pageId = link.dataset.link;
                    if (pageId) {
                        showPage(pageId);
                    }
                });
            });

            showPage(window.location.hash.substring(1) || 'home');
            
            // --- CONTACT FORM LOGIC ---
            const contactFormHTML = `
                <form id="contact-form" class="w-full p-8 rounded-lg glass-effect text-center form-container">
                    <h3 class="text-3xl font-bold mb-4 text-white">Let's Connect</h3>
                    <p class="text-gray-300 text-lg">Have a question or want to work together?</p>
                    <p class="text-gray-400 mb-6 text-md"><i>Feel free to send a message or connect with me on LinkedIn.</i></p>
                    <input type="text" name="_honey" style="display:none">
                    <div class="space-y-4 text-left">
                        <input type="text" name="name" placeholder="Your Name" required class="w-full bg-gray-900/50 border border-gray-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all">
                        <input type="email" name="email" placeholder="Your Email" required class="w-full bg-gray-900/50 border border-gray-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all">
                        <textarea name="message" rows="4" placeholder="Your Message" required class="w-full bg-gray-900/50 border border-gray-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all"></textarea>
                    </div>
                    <div class="mt-8 flex flex-col sm:flex-row justify-center items-center gap-4">
                        <button type="submit" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg transition-all duration-300 inline-flex items-center gap-3 glow-effect">
                            <i class="fas fa-paper-plane"></i>Send Message
                        </button>
                        <a href="https://www.linkedin.com/in/madhavareddyarimanda/" target="_blank" class="linkedin-btn bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg transition-all duration-300 inline-flex items-center gap-3">
                            <i class="fab fa-linkedin"></i>Connect on LinkedIn
                        </a>
                    </div>
                </form>`;
            
            document.getElementById('home-contact-form-container').innerHTML = contactFormHTML;

            const successToast = document.getElementById('success-toast');
            const handleFormSubmit = (event) => {
                event.preventDefault();
                successToast.classList.add('show');
                setTimeout(() => successToast.classList.remove('show'), 4000);
                event.target.reset();
                if(contactModal.classList.contains('visible')) closeModal();
            };

            document.getElementById('contact-form').addEventListener('submit', handleFormSubmit);

            // --- MODAL LOGIC ---
            const contactModal = document.getElementById('contact-modal');
            const certModal = document.getElementById('certificate-modal');
            const certIframe = document.getElementById('certificate-iframe');

            const openModal = (modal) => {
                modal.classList.add('visible');
            };

            const closeModal = (modal) => {
                modal.classList.remove('visible');
            };

            // Contact Modal
            const contactModalContent = document.getElementById('contact-modal-content');
            const modalFormContainer = document.createElement('div');
            modalFormContainer.innerHTML = contactFormHTML;
            modalFormContainer.querySelector('form').id = 'modal-contact-form';
            const closeBtn = document.createElement('button');
            closeBtn.innerHTML = '&times;';
            closeBtn.className = 'close-btn';
            modalFormContainer.querySelector('form').prepend(closeBtn);
            contactModalContent.appendChild(modalFormContainer);
            modalFormContainer.querySelector('#modal-contact-form').addEventListener('submit', handleFormSubmit);
            closeBtn.addEventListener('click', () => closeModal(contactModal));
            contactModal.addEventListener('click', (e) => { if (e.target === contactModal) closeModal(contactModal); });
            
            // Certificate Modal
            const closeCertModalBtn = document.getElementById('close-cert-modal');
            closeCertModalBtn.addEventListener('click', () => {
                closeModal(certModal);
                certIframe.src = ''; // Stop video/content from loading in background
            });
            certModal.addEventListener('click', (e) => { if (e.target === certModal) { closeModal(certModal); certIframe.src = ''; } });
            
            // Floating Button Click
            floatingBtn.addEventListener('click', () => {
                if (isContactState) {
                    openModal(contactModal);
                } else {
                    const aboutSection = document.getElementById('about-section');
                    if (aboutSection) {
                        aboutSection.scrollIntoView({ behavior: 'smooth' });
                    }
                }
            });

            // Certificate Button Click (Event Delegation)
            document.addEventListener('click', (e) => {
                const certButton = e.target.closest('.view-cert-btn');
                if (certButton) {
                    const url = certButton.dataset.url;
                    const type = certButton.dataset.type;
                    if (url && url !== '#') {
                        if (type === 'direct') {
                            window.open(url, '_blank', 'noopener,noreferrer');
                        } else {
                            certIframe.src = url;
                            openModal(certModal);
                        }
                    }
                }
            });

            // --- DYNAMIC OBSERVERS ---
            const timelineContainer = document.getElementById('experience-container');
            if (timelineContainer) {
                const timelineProgress = document.getElementById('timeline-progress');
                const timelineItems = Array.from(timelineContainer.querySelectorAll('.timeline-item'));
                const itemEntryObserver = new IntersectionObserver((entries) => { entries.forEach(e => e.target.classList.toggle('visible', e.isIntersecting)); }, { threshold: 0.5, rootMargin: "0px 0px -50px 0px" });
                const lineProgressObserver = new IntersectionObserver((entries) => { entries.forEach(e => { if (e.isIntersecting) timelineProgress.style.height = `${e.target.offsetTop + (e.target.querySelector('.timeline-icon').offsetHeight / 2)}px`; }); }, { threshold: 0.6 });
                timelineItems.forEach(item => { itemEntryObserver.observe(item); lineProgressObserver.observe(item); });
                const timelineEnd = document.getElementById('timeline-end');
                if (timelineEnd) { new IntersectionObserver(e => { if (e[0].isIntersecting) timelineProgress.style.height = '100%'; }, { threshold: 1.0 }).observe(timelineEnd); }
            }
            const caseButtons = document.querySelectorAll('#case-buttons-container .case-button');
            const caseContents = document.querySelectorAll('#case-selector-container .case-content');
            const caseCharts = document.querySelectorAll('.case-chart');
            caseButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const activeCase = button.dataset.case;
                    caseButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    
                    caseContents.forEach(content => {
                        content.classList.toggle('active', content.id === `${activeCase}-case-content`);
                    });
                    caseCharts.forEach(chart => {
                        const shouldBeHidden = chart.id !== `${activeCase}-case-chart`;
                        chart.classList.toggle('hidden', shouldBeHidden);
                        chart.style.opacity = shouldBeHidden ? '0' : '1';
                    });
                });
            });

            const pageObserver = new IntersectionObserver((entries) => { entries.forEach(e => e.target.classList.toggle('is-visible', e.isIntersecting)); }, { threshold: 0.2 });
            document.querySelectorAll('.presentation-page').forEach(page => pageObserver.observe(page));

            updateFloatingButton();
        });
    </script>
</body>
</html>
